{"version":3,"file":"svelte_animate.js","names":[],"sources":["../../svelte/src/animate/index.js"],"sourcesContent":["/** @import { FlipParams, AnimationConfig } from './public.js' */\nimport { cubicOut } from '../easing/index.js';\n\n/**\n * The flip function calculates the start and end position of an element and animates between them, translating the x and y values.\n * `flip` stands for [First, Last, Invert, Play](https://aerotwist.com/blog/flip-your-animations/).\n *\n * @param {Element} node\n * @param {{ from: DOMRect; to: DOMRect }} fromTo\n * @param {FlipParams} params\n * @returns {AnimationConfig}\n */\nexport function flip(node, { from, to }, params = {}) {\n\tvar { delay = 0, duration = (d) => Math.sqrt(d) * 120, easing = cubicOut } = params;\n\n\tvar style = getComputedStyle(node);\n\n\t// find the transform origin, expressed as a pair of values between 0 and 1\n\tvar transform = style.transform === 'none' ? '' : style.transform;\n\tvar [ox, oy] = style.transformOrigin.split(' ').map(parseFloat);\n\tox /= node.clientWidth;\n\toy /= node.clientHeight;\n\n\t// calculate effect of parent transforms and zoom\n\tvar zoom = get_zoom(node); // https://drafts.csswg.org/css-viewport/#effective-zoom\n\tvar sx = node.clientWidth / to.width / zoom;\n\tvar sy = node.clientHeight / to.height / zoom;\n\n\t// find the starting position of the transform origin\n\tvar fx = from.left + from.width * ox;\n\tvar fy = from.top + from.height * oy;\n\n\t// find the ending position of the transform origin\n\tvar tx = to.left + to.width * ox;\n\tvar ty = to.top + to.height * oy;\n\n\t// find the translation at the start of the transform\n\tvar dx = (fx - tx) * sx;\n\tvar dy = (fy - ty) * sy;\n\n\t// find the relative scale at the start of the transform\n\tvar dsx = from.width / to.width;\n\tvar dsy = from.height / to.height;\n\n\treturn {\n\t\tdelay,\n\t\tduration: typeof duration === 'function' ? duration(Math.sqrt(dx * dx + dy * dy)) : duration,\n\t\teasing,\n\t\tcss: (t, u) => {\n\t\t\tvar x = u * dx;\n\t\t\tvar y = u * dy;\n\t\t\tvar sx = t + u * dsx;\n\t\t\tvar sy = t + u * dsy;\n\n\t\t\treturn `transform: ${transform} translate(${x}px, ${y}px) scale(${sx}, ${sy});`;\n\t\t}\n\t};\n}\n\n/**\n * @param {Element} element\n */\nfunction get_zoom(element) {\n\tif ('currentCSSZoom' in element) {\n\t\treturn /** @type {number} */ (element.currentCSSZoom);\n\t}\n\n\t/** @type {Element | null} */\n\tvar current = element;\n\tvar zoom = 1;\n\n\twhile (current !== null) {\n\t\tzoom *= +getComputedStyle(current).zoom;\n\t\tcurrent = /** @type {Element | null} */ (current.parentElement);\n\t}\n\n\treturn zoom;\n}\n"],"mappings":";;;;;;;;;;;;;AAYA,SAAgB,KAAK,MAAM,EAAE,MAAM,MAAM,SAAS,EAAE,EAAE;CACrD,IAAI,EAAE,QAAQ,GAAG,YAAY,MAAM,KAAK,KAAK,EAAE,GAAG,KAAK,SAAS,aAAa;CAE7E,IAAI,QAAQ,iBAAiB,KAAK;CAGlC,IAAI,YAAY,MAAM,cAAc,SAAS,KAAK,MAAM;CACxD,IAAI,CAAC,IAAI,MAAM,MAAM,gBAAgB,MAAM,IAAI,CAAC,IAAI,WAAW;AAC/D,OAAM,KAAK;AACX,OAAM,KAAK;CAGX,IAAI,OAAO,SAAS,KAAK;CACzB,IAAI,KAAK,KAAK,cAAc,GAAG,QAAQ;CACvC,IAAI,KAAK,KAAK,eAAe,GAAG,SAAS;CAGzC,IAAI,KAAK,KAAK,OAAO,KAAK,QAAQ;CAClC,IAAI,KAAK,KAAK,MAAM,KAAK,SAAS;CAGlC,IAAI,KAAK,GAAG,OAAO,GAAG,QAAQ;CAC9B,IAAI,KAAK,GAAG,MAAM,GAAG,SAAS;CAG9B,IAAI,MAAM,KAAK,MAAM;CACrB,IAAI,MAAM,KAAK,MAAM;CAGrB,IAAI,MAAM,KAAK,QAAQ,GAAG;CAC1B,IAAI,MAAM,KAAK,SAAS,GAAG;AAE3B,QAAO;EACN;EACA,UAAU,OAAO,aAAa,aAAa,SAAS,KAAK,KAAK,KAAK,KAAK,KAAK,GAAG,CAAC,GAAG;EACpF;EACA,MAAM,GAAG,MAAM;AAMd,UAAO,cAAc,UAAU,aALvB,IAAI,GAKkC,MAJtC,IAAI,GAI0C,YAH7C,IAAI,IAAI,IAGoD,IAF5D,IAAI,IAAI,IAE2D;;EAE7E;;;;;AAMF,SAAS,SAAS,SAAS;AAC1B,KAAI,oBAAoB,QACvB,QAA8B,QAAQ;;CAIvC,IAAI,UAAU;CACd,IAAI,OAAO;AAEX,QAAO,YAAY,MAAM;AACxB,UAAQ,CAAC,iBAAiB,QAAQ,CAAC;AACnC,YAAyC,QAAQ;;AAGlD,QAAO"}
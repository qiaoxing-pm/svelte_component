<svelte:options customElement="my-button" />

<script>
  const el = $host();

  // è·å–åˆå§‹ props
  let { title = { label: "æŒ‰é’®~", count: 0 } } = $props();

  const handleClick = () => {
    // å¿…é¡»ç”Ÿæˆæ–°å¯¹è±¡å¼•ç”¨ï¼Œå¦åˆ™ä¸ä¼šè§¦å‘æ›´æ–°
    title = { ...title, count: title.count + 1 };
    console.log("æŒ‰é’®è¢«ç‚¹å‡»å•¦~ ğŸ˜˜", title.count);

    // æ´¾å‘è‡ªå®šä¹‰äº‹ä»¶
    el.dispatchEvent(
      new CustomEvent("click-asd", {
        detail: { title },
        bubbles: true,
        composed: true,
      })
    );
  };
</script>

<div>
  <button on:click={handleClick}>
    {title.label}
    {title.count > 0 ? `(${title.count})` : ""}
  </button>
</div>
